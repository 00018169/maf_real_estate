{% extends 'base.html' %}
{% load humanize %}

{% block content %}
<div class="row mb-4">
  <div class="col-12">
    <h2>My Properties</h2>
    <a href="{% url 'create_property' %}" class="btn btn-success">Add New Property</a>
  </div>
</div>

<div class="row">
  {% for property in properties %}
  <div class="col-md-4 mb-4">
    <div class="card h-100 border-primary">
      {% if property.image %}
      <img src="{{ property.image.url }}" class="card-img-top" alt="{{ property.title }}">
      {% else %}
      <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="No image">
      {% endif %}
      <div class="card-body">
        <h5 class="card-title">{{ property.title }}</h5>
        <p class="card-text text-muted">{{ property.city }}</p>
        <h6 class="text-primary">${{ property.price|floatformat:0|intcomma }}</h6>
        <span class="badge bg-info">{{ property.get_property_type_display }}</span>
        <div class="mt-3">
          <a href="{% url 'property_detail' property.pk %}" class="btn btn-primary btn-sm">View</a>
          <a href="{% url 'update_property' property.pk %}" class="btn btn-warning btn-sm">Edit</a>
          <a href="{% url 'delete_property' property.pk %}" class="btn btn-danger btn-sm">Delete</a>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <p>You haven't listed any properties yet.</p>
  </div>
  {% endfor %}
</div>
{% endblock %}